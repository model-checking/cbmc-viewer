
<html>
<head>
<title>source/include/core_http_client.h</title>
<link rel="stylesheet" type="text/css" href="../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /*</div><div id="2" class="line none">    2  * coreHTTP v2.0.2</div><div id="3" class="line none">    3  * Copyright (C) 2020 Amazon.com, Inc. or its affiliates.  All Rights Reserved.</div><div id="4" class="line none">    4  *</div><div id="5" class="line none">    5  * Permission is hereby granted, free of charge, to any person obtaining a copy of</div><div id="6" class="line none">    6  * this software and associated documentation files (the "Software"), to deal in</div><div id="7" class="line none">    7  * the Software without restriction, including without limitation the rights to</div><div id="8" class="line none">    8  * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of</div><div id="9" class="line none">    9  * the Software, and to permit persons to whom the Software is furnished to do so,</div><div id="10" class="line none">   10  * subject to the following conditions:</div><div id="11" class="line none">   11  *</div><div id="12" class="line none">   12  * The above copyright notice and this permission notice shall be included in all</div><div id="13" class="line none">   13  * copies or substantial portions of the Software.</div><div id="14" class="line none">   14  *</div><div id="15" class="line none">   15  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</div><div id="16" class="line none">   16  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS</div><div id="17" class="line none">   17  * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR</div><div id="18" class="line none">   18  * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER</div><div id="19" class="line none">   19  * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</div><div id="20" class="line none">   20  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div><div id="21" class="line none">   21  */</div><div id="22" class="line none">   22 </div><div id="23" class="line none">   23 /**</div><div id="24" class="line none">   24  * @file core_http_client.h</div><div id="25" class="line none">   25  * @brief User facing functions of the HTTP Client library.</div><div id="26" class="line none">   26  */</div><div id="27" class="line none">   27 </div><div id="28" class="line none">   28 #ifndef <a href="core_http_client.h.html#29">CORE_HTTP_CLIENT_H_</a></div><div id="29" class="line none">   29 #define <a href="core_http_client.h.html#29">CORE_HTTP_CLIENT_H_</a></div><div id="30" class="line none">   30 </div><div id="31" class="line none">   31 #include &lt;stdint.h&gt;</div><div id="32" class="line none">   32 #include &lt;stddef.h&gt;</div><div id="33" class="line none">   33 </div><div id="34" class="line none">   34 /* *INDENT-OFF* */</div><div id="35" class="line none">   35 #ifdef __cplusplus</div><div id="36" class="line none">   36     extern "C" {</div><div id="37" class="line none">   37 #endif</div><div id="38" class="line none">   38 /* *INDENT-ON* */</div><div id="39" class="line none">   39 </div><div id="40" class="line none">   40 /* HTTP_DO_NOT_USE_CUSTOM_CONFIG allows building the HTTP Client library</div><div id="41" class="line none">   41  * without a config file. If a config file is provided, the</div><div id="42" class="line none">   42  * HTTP_DO_NOT_USE_CUSTOM_CONFIG macro must not be defined.</div><div id="43" class="line none">   43  */</div><div id="44" class="line none">   44 #ifndef HTTP_DO_NOT_USE_CUSTOM_CONFIG</div><div id="45" class="line none">   45     #include "core_http_config.h"</div><div id="46" class="line none">   46 #endif</div><div id="47" class="line none">   47 </div><div id="48" class="line none">   48 /* Include config defaults header to get default values of configurations not</div><div id="49" class="line none">   49  * defined in core_http_config.h file. */</div><div id="50" class="line none">   50 #include "core_http_config_defaults.h"</div><div id="51" class="line none">   51 </div><div id="52" class="line none">   52 /* Transport interface include. */</div><div id="53" class="line none">   53 #include "transport_interface.h"</div><div id="54" class="line none">   54 </div><div id="55" class="line none">   55 /* Convenience macros for some HTTP request methods. */</div><div id="56" class="line none">   56 </div><div id="57" class="line none">   57 /** @addtogroup http_constants</div><div id="58" class="line none">   58  *  @{</div><div id="59" class="line none">   59  */</div><div id="60" class="line none">   60 #define <a href="core_http_client.h.html#60">HTTP_METHOD_GET</a>     "GET"                       /**&lt; HTTP Method GET string. */</div><div id="61" class="line none">   61 #define <a href="core_http_client.h.html#61">HTTP_METHOD_PUT</a>     "PUT"                       /**&lt; HTTP Method PUT string. */</div><div id="62" class="line none">   62 #define <a href="core_http_client.h.html#62">HTTP_METHOD_POST</a>    "POST"                      /**&lt; HTTP Method POST string. */</div><div id="63" class="line none">   63 #define <a href="core_http_client.h.html#63">HTTP_METHOD_HEAD</a>    "HEAD"                      /**&lt; HTTP Method HEAD string. */</div><div id="64" class="line none">   64 /** @}*/</div><div id="65" class="line none">   65 </div><div id="66" class="line none">   66 /**</div><div id="67" class="line none">   67  * @ingroup http_constants</div><div id="68" class="line none">   68  * @brief The maximum Content-Length header field and value that could be</div><div id="69" class="line none">   69  * written to the request header buffer.</div><div id="70" class="line none">   70  */</div><div id="71" class="line none">   71 #define <a href="core_http_client.h.html#71">HTTP_MAX_CONTENT_LENGTH_HEADER_LENGTH</a>    sizeof( "Content-Length: 4294967295" ) - 1U</div><div id="72" class="line none">   72 </div><div id="73" class="line none">   73 /**</div><div id="74" class="line none">   74  * @defgroup http_send_flags HTTPClient_Send Flags</div><div id="75" class="line none">   75  * @brief Values for #HTTPClient_Send sendFlags parameter.</div><div id="76" class="line none">   76  * These flags control some behavior of sending the request or receiving the</div><div id="77" class="line none">   77  * response.</div><div id="78" class="line none">   78  *</div><div id="79" class="line none">   79  * Flags should be bitwise-ORed with each other to change the behavior of</div><div id="80" class="line none">   80  * #HTTPClient_Send.</div><div id="81" class="line none">   81  */</div><div id="82" class="line none">   82 </div><div id="83" class="line none">   83 /**</div><div id="84" class="line none">   84  * @ingroup http_send_flags</div><div id="85" class="line none">   85  * @brief Set this flag to disable automatically writing the Content-Length</div><div id="86" class="line none">   86  * header to send to the server.</div><div id="87" class="line none">   87  *</div><div id="88" class="line none">   88  * This flag is valid only for #HTTPClient_Send sendFlags parameter.</div><div id="89" class="line none">   89  */</div><div id="90" class="line none">   90 #define <a href="core_http_client.h.html#90">HTTP_SEND_DISABLE_CONTENT_LENGTH_FLAG</a>    0x1U</div><div id="91" class="line none">   91 </div><div id="92" class="line none">   92 /**</div><div id="93" class="line none">   93  * @defgroup http_request_flags HTTPRequestInfo_t Flags</div><div id="94" class="line none">   94  * @brief Flags for #HTTPRequestInfo_t.reqFlags.</div><div id="95" class="line none">   95  * These flags control what headers are written or not to the</div><div id="96" class="line none">   96  * #HTTPRequestHeaders_t.pBuffer by #HTTPClient_InitializeRequestHeaders.</div><div id="97" class="line none">   97  *</div><div id="98" class="line none">   98  * Flags should be bitwise-ORed with each other to change the behavior of</div><div id="99" class="line none">   99  * #HTTPClient_InitializeRequestHeaders.</div><div id="100" class="line none">  100  */</div><div id="101" class="line none">  101 </div><div id="102" class="line none">  102 /**</div><div id="103" class="line none">  103  * @ingroup http_request_flags</div><div id="104" class="line none">  104  * @brief Set this flag to indicate that the request is for a persistent</div><div id="105" class="line none">  105  * connection.</div><div id="106" class="line none">  106  *</div><div id="107" class="line none">  107  * Setting this will cause a "Connection: Keep-Alive" to be written to the</div><div id="108" class="line none">  108  * request headers.</div><div id="109" class="line none">  109  *</div><div id="110" class="line none">  110  * This flag is valid only for #HTTPRequestInfo_t reqFlags parameter.</div><div id="111" class="line none">  111  */</div><div id="112" class="line none">  112 #define <a href="core_http_client.h.html#112">HTTP_REQUEST_KEEP_ALIVE_FLAG</a>    0x1U</div><div id="113" class="line none">  113 </div><div id="114" class="line none">  114 /**</div><div id="115" class="line none">  115  * @defgroup http_response_flags HTTPResponse_t Flags</div><div id="116" class="line none">  116  * @brief Flags for #HTTPResponse_t.respFlags.</div><div id="117" class="line none">  117  * These flags are populated in #HTTPResponse_t.respFlags by the #HTTPClient_Send</div><div id="118" class="line none">  118  * function.</div><div id="119" class="line none">  119  *</div><div id="120" class="line none">  120  * A flag's value can be extracted from #HTTPResponse_t.respFlags with a</div><div id="121" class="line none">  121  * bitwise-AND.</div><div id="122" class="line none">  122  */</div><div id="123" class="line none">  123 </div><div id="124" class="line none">  124 /**</div><div id="125" class="line none">  125  * @ingroup http_response_flags</div><div id="126" class="line none">  126  * @brief This will be set to true if header "Connection: close" is found.</div><div id="127" class="line none">  127  *</div><div id="128" class="line none">  128  * If a "Connection: close" header is present the application should always</div><div id="129" class="line none">  129  * close the connection.</div><div id="130" class="line none">  130  *</div><div id="131" class="line none">  131  * This flag is valid only for #HTTPResponse_t.respFlags.</div><div id="132" class="line none">  132  */</div><div id="133" class="line none">  133 #define <a href="core_http_client.h.html#133">HTTP_RESPONSE_CONNECTION_CLOSE_FLAG</a>         0x1U</div><div id="134" class="line none">  134 </div><div id="135" class="line none">  135 /**</div><div id="136" class="line none">  136  * @ingroup http_response_flags</div><div id="137" class="line none">  137  * @brief This will be set to true if header "Connection: Keep-Alive" is found.</div><div id="138" class="line none">  138  *</div><div id="139" class="line none">  139  * This flag is valid only for #HTTPResponse_t.respFlags.</div><div id="140" class="line none">  140  */</div><div id="141" class="line none">  141 #define <a href="core_http_client.h.html#141">HTTP_RESPONSE_CONNECTION_KEEP_ALIVE_FLAG</a>    0x2U</div><div id="142" class="line none">  142 </div><div id="143" class="line none">  143 /**</div><div id="144" class="line none">  144  * @ingroup http_constants</div><div id="145" class="line none">  145  * @brief Flag that represents End of File byte in the range specification of</div><div id="146" class="line none">  146  * a Range Request.</div><div id="147" class="line none">  147  * This flag should be used ONLY for 2 kinds of range specifications when</div><div id="148" class="line none">  148  * creating the Range Request header through the #HTTPClient_AddRangeHeader</div><div id="149" class="line none">  149  * function:</div><div id="150" class="line none">  150  *  - When the requested range is all bytes from the starting range byte to</div><div id="151" class="line none">  151  * the end of file.</div><div id="152" class="line none">  152  *  - When the requested range is for the last N bytes of the file.</div><div id="153" class="line none">  153  * In both cases, this value should be used for the "rangeEnd" parameter.</div><div id="154" class="line none">  154  */</div><div id="155" class="line none">  155 #define <a href="core_http_client.h.html#155">HTTP_RANGE_REQUEST_END_OF_FILE</a>              -1</div><div id="156" class="line none">  156 </div><div id="157" class="line none">  157 /**</div><div id="158" class="line none">  158  * @ingroup http_enum_types</div><div id="159" class="line none">  159  * @brief The HTTP Client library return status.</div><div id="160" class="line none">  160  */</div><div id="161" class="line none">  161 typedef enum <a href="core_http_client.h.html#161">HTTPStatus</a></div><div id="162" class="line none">  162 {</div><div id="163" class="line none">  163     /**</div><div id="164" class="line none">  164      * @brief The HTTP Client library function completed successfully.</div><div id="165" class="line none">  165      *</div><div id="166" class="line none">  166      * Functions that may return this value:</div><div id="167" class="line none">  167      * - #HTTPClient_InitializeRequestHeaders</div><div id="168" class="line none">  168      * - #HTTPClient_AddHeader</div><div id="169" class="line none">  169      * - #HTTPClient_AddRangeHeader</div><div id="170" class="line none">  170      * - #HTTPClient_Send</div><div id="171" class="line none">  171      * - #HTTPClient_ReadHeader</div><div id="172" class="line none">  172      */</div><div id="173" class="line none">  173     <a href="core_http_client.h.html#173">HTTPSuccess</a>,</div><div id="174" class="line none">  174 </div><div id="175" class="line none">  175     /**</div><div id="176" class="line none">  176      * @brief The HTTP Client library function input an invalid parameter.</div><div id="177" class="line none">  177      *</div><div id="178" class="line none">  178      * Functions that may return this value:</div><div id="179" class="line none">  179      * - #HTTPClient_InitializeRequestHeaders</div><div id="180" class="line none">  180      * - #HTTPClient_AddHeader</div><div id="181" class="line none">  181      * - #HTTPClient_AddRangeHeader</div><div id="182" class="line none">  182      * - #HTTPClient_Send</div><div id="183" class="line none">  183      * - #HTTPClient_ReadHeader</div><div id="184" class="line none">  184      */</div><div id="185" class="line none">  185     <a href="core_http_client.h.html#185">HTTPInvalidParameter</a>,</div><div id="186" class="line none">  186 </div><div id="187" class="line none">  187     /**</div><div id="188" class="line none">  188      * @brief A network error was returned from the transport interface.</div><div id="189" class="line none">  189      *</div><div id="190" class="line none">  190      * Functions that may return this value:</div><div id="191" class="line none">  191      * - #HTTPClient_Send</div><div id="192" class="line none">  192      */</div><div id="193" class="line none">  193     <a href="core_http_client.h.html#193">HTTPNetworkError</a>,</div><div id="194" class="line none">  194 </div><div id="195" class="line none">  195     /**</div><div id="196" class="line none">  196      * @brief Part of the HTTP response was received from the network.</div><div id="197" class="line none">  197      *</div><div id="198" class="line none">  198      * Functions that may return this value:</div><div id="199" class="line none">  199      * - #HTTPClient_Send</div><div id="200" class="line none">  200      */</div><div id="201" class="line none">  201     <a href="core_http_client.h.html#201">HTTPPartialResponse</a>,</div><div id="202" class="line none">  202 </div><div id="203" class="line none">  203     /**</div><div id="204" class="line none">  204      * @brief No HTTP response was received from the network.</div><div id="205" class="line none">  205      *</div><div id="206" class="line none">  206      * This can occur only if there was no data received from the transport</div><div id="207" class="line none">  207      * interface.</div><div id="208" class="line none">  208      *</div><div id="209" class="line none">  209      * Functions that may return this value:</div><div id="210" class="line none">  210      * - #HTTPClient_Send</div><div id="211" class="line none">  211      */</div><div id="212" class="line none">  212     <a href="core_http_client.h.html#212">HTTPNoResponse</a>,</div><div id="213" class="line none">  213 </div><div id="214" class="line none">  214     /**</div><div id="215" class="line none">  215      * @brief The application buffer was not large enough for the HTTP request</div><div id="216" class="line none">  216      * headers or the HTTP response message.</div><div id="217" class="line none">  217      *</div><div id="218" class="line none">  218      * Functions that may return this value:</div><div id="219" class="line none">  219      * - #HTTPClient_InitializeRequestHeaders</div><div id="220" class="line none">  220      * - #HTTPClient_AddHeader</div><div id="221" class="line none">  221      * - #HTTPClient_AddRangeHeader</div><div id="222" class="line none">  222      * - #HTTPClient_Send</div><div id="223" class="line none">  223      */</div><div id="224" class="line none">  224     <a href="core_http_client.h.html#224">HTTPInsufficientMemory</a>,</div><div id="225" class="line none">  225 </div><div id="226" class="line none">  226     /**</div><div id="227" class="line none">  227      * @brief The server sent more headers than the configured</div><div id="228" class="line none">  228      * #HTTP_MAX_RESPONSE_HEADERS_SIZE_BYTES.</div><div id="229" class="line none">  229      *</div><div id="230" class="line none">  230      * Functions that may return this value:</div><div id="231" class="line none">  231      * - #HTTPClient_Send</div><div id="232" class="line none">  232      */</div><div id="233" class="line none">  233     <a href="core_http_client.h.html#233">HTTPSecurityAlertResponseHeadersSizeLimitExceeded</a>,</div><div id="234" class="line none">  234 </div><div id="235" class="line none">  235     /**</div><div id="236" class="line none">  236      * @brief A response contained the "Connection: close" header, but there</div><div id="237" class="line none">  237      * was more data at the end of the complete message.</div><div id="238" class="line none">  238      *</div><div id="239" class="line none">  239      * Functions that may return this value:</div><div id="240" class="line none">  240      * - #HTTPClient_Send</div><div id="241" class="line none">  241      */</div><div id="242" class="line none">  242     <a href="core_http_client.h.html#242">HTTPSecurityAlertExtraneousResponseData</a>,</div><div id="243" class="line none">  243 </div><div id="244" class="line none">  244     /**</div><div id="245" class="line none">  245      * @brief The server sent a chunk header containing an invalid character.</div><div id="246" class="line none">  246      *</div><div id="247" class="line none">  247      * Functions that may return this value:</div><div id="248" class="line none">  248      * - #HTTPClient_Send</div><div id="249" class="line none">  249      */</div><div id="250" class="line none">  250     <a href="core_http_client.h.html#250">HTTPSecurityAlertInvalidChunkHeader</a>,</div><div id="251" class="line none">  251 </div><div id="252" class="line none">  252     /**</div><div id="253" class="line none">  253      * @brief The server sent a response with an invalid character in the</div><div id="254" class="line none">  254      * HTTP protocol version.</div><div id="255" class="line none">  255      *</div><div id="256" class="line none">  256      * Functions that may return this value:</div><div id="257" class="line none">  257      * - #HTTPClient_Send</div><div id="258" class="line none">  258      */</div><div id="259" class="line none">  259     <a href="core_http_client.h.html#259">HTTPSecurityAlertInvalidProtocolVersion</a>,</div><div id="260" class="line none">  260 </div><div id="261" class="line none">  261     /**</div><div id="262" class="line none">  262      * @brief The server sent a response with an invalid character in the</div><div id="263" class="line none">  263      * HTTP status-code or the HTTP status code is out of range.</div><div id="264" class="line none">  264      *</div><div id="265" class="line none">  265      * Functions that may return this value:</div><div id="266" class="line none">  266      * - #HTTPClient_Send</div><div id="267" class="line none">  267      */</div><div id="268" class="line none">  268     <a href="core_http_client.h.html#268">HTTPSecurityAlertInvalidStatusCode</a>,</div><div id="269" class="line none">  269 </div><div id="270" class="line none">  270     /**</div><div id="271" class="line none">  271      * @brief An invalid character was found in the HTTP response message or in</div><div id="272" class="line none">  272      * the HTTP request header.</div><div id="273" class="line none">  273      *</div><div id="274" class="line none">  274      * Functions that may return this value:</div><div id="275" class="line none">  275      * - #HTTPClient_AddHeader</div><div id="276" class="line none">  276      * - #HTTPClient_Send</div><div id="277" class="line none">  277      */</div><div id="278" class="line none">  278     <a href="core_http_client.h.html#278">HTTPSecurityAlertInvalidCharacter</a>,</div><div id="279" class="line none">  279 </div><div id="280" class="line none">  280     /**</div><div id="281" class="line none">  281      * @brief The response contains either an invalid character in the</div><div id="282" class="line none">  282      * Content-Length header or a Content-Length header when it was not expected</div><div id="283" class="line none">  283      * to be present.</div><div id="284" class="line none">  284      *</div><div id="285" class="line none">  285      * Functions that may return this value:</div><div id="286" class="line none">  286      * - #HTTPClient_Send</div><div id="287" class="line none">  287      */</div><div id="288" class="line none">  288     <a href="core_http_client.h.html#288">HTTPSecurityAlertInvalidContentLength</a>,</div><div id="289" class="line none">  289 </div><div id="290" class="line none">  290     /**</div><div id="291" class="line none">  291      * @brief An error occurred in the third-party parsing library.</div><div id="292" class="line none">  292      *</div><div id="293" class="line none">  293      * Functions that may return this value:</div><div id="294" class="line none">  294      * - #HTTPClient_Send</div><div id="295" class="line none">  295      * - #HTTPClient_ReadHeader</div><div id="296" class="line none">  296      */</div><div id="297" class="line none">  297     <a href="core_http_client.h.html#297">HTTPParserInternalError</a>,</div><div id="298" class="line none">  298 </div><div id="299" class="line none">  299     /**</div><div id="300" class="line none">  300      * @brief The requested header field was not found in the response buffer.</div><div id="301" class="line none">  301      *</div><div id="302" class="line none">  302      * Functions that may return this value:</div><div id="303" class="line none">  303      * - #HTTPClient_ReadHeader</div><div id="304" class="line none">  304      */</div><div id="305" class="line none">  305     <a href="core_http_client.h.html#305">HTTPHeaderNotFound</a>,</div><div id="306" class="line none">  306 </div><div id="307" class="line none">  307     /**</div><div id="308" class="line none">  308      * @brief The HTTP response, provided for parsing, is either corrupt or</div><div id="309" class="line none">  309      * incomplete.</div><div id="310" class="line none">  310      *</div><div id="311" class="line none">  311      * Functions that may return this value:</div><div id="312" class="line none">  312      * - #HTTPClient_ReadHeader</div><div id="313" class="line none">  313      */</div><div id="314" class="line none">  314     <a href="core_http_client.h.html#314">HTTPInvalidResponse</a></div><div id="315" class="line none">  315 } <a href="core_http_client.h.html#315">HTTPStatus_t</a>;</div><div id="316" class="line none">  316 </div><div id="317" class="line none">  317 /**</div><div id="318" class="line none">  318  * @ingroup http_struct_types</div><div id="319" class="line none">  319  * @brief Represents header data that will be sent in an HTTP request.</div><div id="320" class="line none">  320  *</div><div id="321" class="line none">  321  * The memory for the header data buffer is supplied by the user. Information in</div><div id="322" class="line none">  322  * the buffer will be filled by calling #HTTPClient_InitializeRequestHeaders and</div><div id="323" class="line none">  323  * #HTTPClient_AddHeader. This buffer may be automatically filled with the</div><div id="324" class="line none">  324  * Content-Length header in #HTTPClient_Send, please see</div><div id="325" class="line none">  325  * HTTP_MAX_CONTENT_LENGTH_HEADER_LENGTH for the maximum amount of space needed</div><div id="326" class="line none">  326  * to accommodate the Content-Length header.</div><div id="327" class="line none">  327  */</div><div id="328" class="line none">  328 typedef struct <a href="core_http_client.h.html#328">HTTPRequestHeaders</a></div><div id="329" class="line none">  329 {</div><div id="330" class="line none">  330     /**</div><div id="331" class="line none">  331      * @brief Buffer to hold the raw HTTP request headers.</div><div id="332" class="line none">  332      *</div><div id="333" class="line none">  333      * This buffer is supplied by the application.</div><div id="334" class="line none">  334      *</div><div id="335" class="line none">  335      * This buffer is owned by the library during #HTTPClient_AddHeader,</div><div id="336" class="line none">  336      * #HTTPClient_AddRangeHeader, #HTTPClient_InitializeRequestHeaders, and</div><div id="337" class="line none">  337      * #HTTPClient_Send. This buffer should not be modified until</div><div id="338" class="line none">  338      * after these functions return.</div><div id="339" class="line none">  339      *</div><div id="340" class="line none">  340      * For optimization this buffer may be re-used with the response. The user</div><div id="341" class="line none">  341      * can re-use this buffer for the storing the response from the server in</div><div id="342" class="line none">  342      * #HTTPResponse_t.pBuffer.</div><div id="343" class="line none">  343      */</div><div id="344" class="line none">  344     <a href="../dependency/3rdparty/http_parser/http_parser.h.html#37">uint8_t</a> * <a href="core_http_client.h.html#344">pBuffer</a>;</div><div id="345" class="line none">  345     size_t <a href="core_http_client.h.html#345">bufferLen</a>; /**&lt; The length of pBuffer in bytes. */</div><div id="346" class="line none">  346 </div><div id="347" class="line none">  347     /**</div><div id="348" class="line none">  348      * @brief The actual size in bytes of headers in the buffer. This field</div><div id="349" class="line none">  349      * is updated by the HTTP Client library functions #HTTPClient_AddHeader,</div><div id="350" class="line none">  350      * and #HTTPClient_InitializeRequestHeaders.</div><div id="351" class="line none">  351      */</div><div id="352" class="line none">  352     size_t <a href="core_http_client.h.html#352">headersLen</a>;</div><div id="353" class="line none">  353 } <a href="core_http_client.h.html#353">HTTPRequestHeaders_t</a>;</div><div id="354" class="line none">  354 </div><div id="355" class="line none">  355 /**</div><div id="356" class="line none">  356  * @ingroup http_struct_types</div><div id="357" class="line none">  357  * @brief Configurations of the initial request headers.</div><div id="358" class="line none">  358  */</div><div id="359" class="line none">  359 typedef struct <a href="core_http_client.h.html#359">HTTPRequestInfo</a></div><div id="360" class="line none">  360 {</div><div id="361" class="line none">  361     /**</div><div id="362" class="line none">  362      * @brief The HTTP request method e.g. "GET", "POST", "PUT", or "HEAD".</div><div id="363" class="line none">  363      */</div><div id="364" class="line none">  364     const char * <a href="core_http_client.h.html#364">pMethod</a>;</div><div id="365" class="line none">  365     size_t <a href="core_http_client.h.html#365">methodLen</a>; /**&lt; The length of the method in bytes. */</div><div id="366" class="line none">  366 </div><div id="367" class="line none">  367     /**</div><div id="368" class="line none">  368      * @brief The Request-URI to the objects of interest, e.g. "/path/to/item.txt".</div><div id="369" class="line none">  369      */</div><div id="370" class="line none">  370     const char * <a href="core_http_client.h.html#370">pPath</a>;</div><div id="371" class="line none">  371     size_t <a href="core_http_client.h.html#371">pathLen</a>; /**&lt; The length of the path in bytes. */</div><div id="372" class="line none">  372 </div><div id="373" class="line none">  373     /**</div><div id="374" class="line none">  374      * @brief The server's host name, e.g. "my-storage.my-cloud.com".</div><div id="375" class="line none">  375      *</div><div id="376" class="line none">  376      * The host does not have a "https://" or "http://" prepending.</div><div id="377" class="line none">  377      */</div><div id="378" class="line none">  378     const char * <a href="core_http_client.h.html#378">pHost</a>;</div><div id="379" class="line none">  379     size_t <a href="core_http_client.h.html#379">hostLen</a>; /**&lt; The length of the host in bytes. */</div><div id="380" class="line none">  380 </div><div id="381" class="line none">  381     /**</div><div id="382" class="line none">  382      * @brief Flags to activate other request header configurations.</div><div id="383" class="line none">  383      *</div><div id="384" class="line none">  384      * Please see @ref http_request_flags for more information.</div><div id="385" class="line none">  385      */</div><div id="386" class="line none">  386     <a href="../dependency/3rdparty/http_parser/http_parser.h.html#41">uint32_t</a> <a href="core_http_client.h.html#386">reqFlags</a>;</div><div id="387" class="line none">  387 } <a href="core_http_client.h.html#387">HTTPRequestInfo_t</a>;</div><div id="388" class="line none">  388 </div><div id="389" class="line none">  389 </div><div id="390" class="line none">  390 </div><div id="391" class="line none">  391 /**</div><div id="392" class="line none">  392  * @ingroup http_struct_types</div><div id="393" class="line none">  393  * @brief Callback to intercept headers during the first parse through of the</div><div id="394" class="line none">  394  * response as it is received from the network.</div><div id="395" class="line none">  395  */</div><div id="396" class="line none">  396 typedef struct <a href="core_http_client.h.html#396">HTTPClient_ResponseHeaderParsingCallback</a></div><div id="397" class="line none">  397 {</div><div id="398" class="line none">  398     /**</div><div id="399" class="line none">  399      * @brief Invoked when both a header field and its associated header value are found.</div><div id="400" class="line none">  400      * @param[in] pContext User context.</div><div id="401" class="line none">  401      * @param[in] fieldLoc Location of the header field name in the response buffer.</div><div id="402" class="line none">  402      * @param[in] fieldLen Length in bytes of the field name.</div><div id="403" class="line none">  403      * @param[in] valueLoc Location of the header value in the response buffer.</div><div id="404" class="line none">  404      * @param[in] valueLen Length in bytes of the value.</div><div id="405" class="line none">  405      * @param[in] statusCode The HTTP response status-code.</div><div id="406" class="line none">  406      */</div><div id="407" class="line none">  407     void ( * <a href="core_http_client.h.html#407">onHeaderCallback</a> )( void * <a href="core_http_client.h.html#417">pContext</a>,</div><div id="408" class="line none">  408                                  const char * fieldLoc,</div><div id="409" class="line none">  409                                  size_t <a href="core_http_client_private.h.html#199">fieldLen</a>,</div><div id="410" class="line none">  410                                  const char * valueLoc,</div><div id="411" class="line none">  411                                  size_t valueLen,</div><div id="412" class="line none">  412                                  <a href="../dependency/3rdparty/http_parser/http_parser.h.html#39">uint16_t</a> <a href="core_http_client.h.html#511">statusCode</a> );</div><div id="413" class="line none">  413 </div><div id="414" class="line none">  414     /**</div><div id="415" class="line none">  415      * @brief Private context for the application.</div><div id="416" class="line none">  416      */</div><div id="417" class="line none">  417     void * <a href="core_http_client.h.html#417">pContext</a>;</div><div id="418" class="line none">  418 } <a href="core_http_client.h.html#418">HTTPClient_ResponseHeaderParsingCallback_t</a>;</div><div id="419" class="line none">  419 </div><div id="420" class="line none">  420 /**</div><div id="421" class="line none">  421  * @ingroup http_callback_types</div><div id="422" class="line none">  422  * @brief Application provided function to query the current time in</div><div id="423" class="line none">  423  * milliseconds.</div><div id="424" class="line none">  424  *</div><div id="425" class="line none">  425  * @return The current time in milliseconds.</div><div id="426" class="line none">  426  */</div><div id="427" class="line none">  427 typedef <a href="../dependency/3rdparty/http_parser/http_parser.h.html#41">uint32_t</a> (* <a href="core_http_client.h.html#427">HTTPClient_GetCurrentTimeFunc_t</a> )( void );</div><div id="428" class="line none">  428 </div><div id="429" class="line none">  429 /**</div><div id="430" class="line none">  430  * @ingroup http_struct_types</div><div id="431" class="line none">  431  * @brief Represents an HTTP response.</div><div id="432" class="line none">  432  */</div><div id="433" class="line none">  433 typedef struct <a href="core_http_client.h.html#433">HTTPResponse</a></div><div id="434" class="line none">  434 {</div><div id="435" class="line none">  435     /**</div><div id="436" class="line none">  436      * @brief Buffer for both the raw HTTP header and body.</div><div id="437" class="line none">  437      *</div><div id="438" class="line none">  438      * This buffer is supplied by the application.</div><div id="439" class="line none">  439      *</div><div id="440" class="line none">  440      * This buffer is owned by the library during #HTTPClient_Send and</div><div id="441" class="line none">  441      * #HTTPClient_ReadHeader. This buffer should not be modified until after</div><div id="442" class="line none">  442      * these functions return.</div><div id="443" class="line none">  443      *</div><div id="444" class="line none">  444      * For optimization this buffer may be used with the request headers. The</div><div id="445" class="line none">  445      * request header buffer is configured in #HTTPRequestHeaders_t.pBuffer.</div><div id="446" class="line none">  446      * When the same buffer is used for the request headers, #HTTPClient_Send</div><div id="447" class="line none">  447      * will send the headers in the buffer first, then fill the buffer with</div><div id="448" class="line none">  448      * the response message.</div><div id="449" class="line none">  449      */</div><div id="450" class="line none">  450     <a href="../dependency/3rdparty/http_parser/http_parser.h.html#37">uint8_t</a> * <a href="core_http_client.h.html#344">pBuffer</a>;</div><div id="451" class="line none">  451     size_t <a href="core_http_client.h.html#345">bufferLen</a>; /**&lt; The length of the response buffer in bytes. */</div><div id="452" class="line none">  452 </div><div id="453" class="line none">  453     /**</div><div id="454" class="line none">  454      * @brief Optional callback for intercepting the header during the first</div><div id="455" class="line none">  455      * parse through of the response as is it receive from the network.</div><div id="456" class="line none">  456      * Set to NULL to disable.</div><div id="457" class="line none">  457      */</div><div id="458" class="line none">  458     <a href="core_http_client.h.html#418">HTTPClient_ResponseHeaderParsingCallback_t</a> * <a href="core_http_client.h.html#458">pHeaderParsingCallback</a>;</div><div id="459" class="line none">  459 </div><div id="460" class="line none">  460     /**</div><div id="461" class="line none">  461      * @brief Optional callback for getting the system time.</div><div id="462" class="line none">  462      *</div><div id="463" class="line none">  463      * This is used to calculate the elapsed time when retrying network reads or</div><div id="464" class="line none">  464      * sends that return zero bytes received or sent, respectively. If this</div><div id="465" class="line none">  465      * field is set to NULL, then network send and receive won't be retried</div><div id="466" class="line none">  466      * after a zero is returned.</div><div id="467" class="line none">  467      *</div><div id="468" class="line none">  468      * If this function is set, then the maximum time for retrying network reads</div><div id="469" class="line none">  469      * that return zero bytes can be set through #HTTP_RECV_RETRY_TIMEOUT_MS.</div><div id="470" class="line none">  470      *</div><div id="471" class="line none">  471      * If this function is set, then the maximum elapsed time between network</div><div id="472" class="line none">  472      * sends greater than zero is set in HTTP_SEND_RETRY_TIMEOUT_MS.</div><div id="473" class="line none">  473      */</div><div id="474" class="line none">  474     <a href="core_http_client.h.html#427">HTTPClient_GetCurrentTimeFunc_t</a> <a href="core_http_client.h.html#474">getTime</a>;</div><div id="475" class="line none">  475 </div><div id="476" class="line none">  476     /**</div><div id="477" class="line none">  477      * @brief The starting location of the response headers in pBuffer.</div><div id="478" class="line none">  478      *</div><div id="479" class="line none">  479      * This is updated by #HTTPClient_Send.</div><div id="480" class="line none">  480      */</div><div id="481" class="line none">  481     const <a href="../dependency/3rdparty/http_parser/http_parser.h.html#37">uint8_t</a> * <a href="core_http_client.h.html#481">pHeaders</a>;</div><div id="482" class="line none">  482 </div><div id="483" class="line none">  483     /**</div><div id="484" class="line none">  484      * @brief Byte length of the response headers in pBuffer.</div><div id="485" class="line none">  485      *</div><div id="486" class="line none">  486      * This is updated by #HTTPClient_Send.</div><div id="487" class="line none">  487      */</div><div id="488" class="line none">  488     size_t <a href="core_http_client.h.html#352">headersLen</a>;</div><div id="489" class="line none">  489 </div><div id="490" class="line none">  490     /**</div><div id="491" class="line none">  491      * @brief The starting location of the response body in pBuffer.</div><div id="492" class="line none">  492      *</div><div id="493" class="line none">  493      * This is updated by #HTTPClient_Send.</div><div id="494" class="line none">  494      */</div><div id="495" class="line none">  495     const <a href="../dependency/3rdparty/http_parser/http_parser.h.html#37">uint8_t</a> * <a href="core_http_client.h.html#495">pBody</a>;</div><div id="496" class="line none">  496 </div><div id="497" class="line none">  497     /**</div><div id="498" class="line none">  498      * @brief Byte length of the body in pBuffer.</div><div id="499" class="line none">  499      *</div><div id="500" class="line none">  500      * This is updated by #HTTPClient_Send.</div><div id="501" class="line none">  501      */</div><div id="502" class="line none">  502     size_t <a href="core_http_client.h.html#502">bodyLen</a>;</div><div id="503" class="line none">  503 </div><div id="504" class="line none">  504     /* Useful HTTP header values found. */</div><div id="505" class="line none">  505 </div><div id="506" class="line none">  506     /**</div><div id="507" class="line none">  507      * @brief The HTTP response Status-Code.</div><div id="508" class="line none">  508      *</div><div id="509" class="line none">  509      * This is updated by #HTTPClient_Send.</div><div id="510" class="line none">  510      */</div><div id="511" class="line none">  511     <a href="../dependency/3rdparty/http_parser/http_parser.h.html#39">uint16_t</a> <a href="core_http_client.h.html#511">statusCode</a>;</div><div id="512" class="line none">  512 </div><div id="513" class="line none">  513     /**</div><div id="514" class="line none">  514      * @brief The value in the "Content-Length" header is returned here.</div><div id="515" class="line none">  515      *</div><div id="516" class="line none">  516      * This is updated by #HTTPClient_Send.</div><div id="517" class="line none">  517      */</div><div id="518" class="line none">  518     size_t <a href="core_http_client.h.html#518">contentLength</a>;</div><div id="519" class="line none">  519 </div><div id="520" class="line none">  520     /**</div><div id="521" class="line none">  521      * @brief Count of the headers sent by the server.</div><div id="522" class="line none">  522      *</div><div id="523" class="line none">  523      * This is updated by #HTTPClient_Send.</div><div id="524" class="line none">  524      */</div><div id="525" class="line none">  525     size_t <a href="core_http_client.h.html#525">headerCount</a>;</div><div id="526" class="line none">  526 </div><div id="527" class="line none">  527     /**</div><div id="528" class="line none">  528      * @brief Flags of useful headers found in the response.</div><div id="529" class="line none">  529      *</div><div id="530" class="line none">  530      * This is updated by #HTTPClient_Send. Please see @ref http_response_flags</div><div id="531" class="line none">  531      * for more information.</div><div id="532" class="line none">  532      */</div><div id="533" class="line none">  533     <a href="../dependency/3rdparty/http_parser/http_parser.h.html#41">uint32_t</a> <a href="core_http_client.h.html#533">respFlags</a>;</div><div id="534" class="line none">  534 } <a href="core_http_client.h.html#534">HTTPResponse_t</a>;</div><div id="535" class="line none">  535 </div><div id="536" class="line none">  536 /**</div><div id="537" class="line none">  537  * @brief Initialize the request headers, stored in</div><div id="538" class="line none">  538  * #HTTPRequestHeaders_t.pBuffer, with initial configurations from</div><div id="539" class="line none">  539  * #HTTPRequestInfo_t. This method is expected to be called before sending a</div><div id="540" class="line none">  540  * new request.</div><div id="541" class="line none">  541  *</div><div id="542" class="line none">  542  * Upon return, #HTTPRequestHeaders_t.headersLen will be updated with the number</div><div id="543" class="line none">  543  * of bytes written.</div><div id="544" class="line none">  544  *</div><div id="545" class="line none">  545  * Each line in the header is listed below and written in this order:</div><div id="546" class="line none">  546  *     &lt;#HTTPRequestInfo_t.pMethod&gt; &lt;#HTTPRequestInfo_t.pPath&gt; &lt;#HTTP_PROTOCOL_VERSION&gt;</div><div id="547" class="line none">  547  *     User-Agent: &lt;#HTTP_USER_AGENT_VALUE&gt;</div><div id="548" class="line none">  548  *     Host: &lt;#HTTPRequestInfo_t.pHost&gt;</div><div id="549" class="line none">  549  *</div><div id="550" class="line none">  550  * Note that "Connection" header can be added and set to "keep-alive" by</div><div id="551" class="line none">  551  * activating the HTTP_REQUEST_KEEP_ALIVE_FLAG in #HTTPRequestInfo_t.reqFlags.</div><div id="552" class="line none">  552  *</div><div id="553" class="line none">  553  * @param[in] pRequestHeaders Request header buffer information.</div><div id="554" class="line none">  554  * @param[in] pRequestInfo Initial request header configurations.</div><div id="555" class="line none">  555  * @return One of the following:</div><div id="556" class="line none">  556  * - #HTTPSuccess (If successful)</div><div id="557" class="line none">  557  * - #HTTPInvalidParameter (If any provided parameters or their members are invalid.)</div><div id="558" class="line none">  558  * - #HTTPInsufficientMemory (If provided buffer size is not large enough to hold headers.)</div><div id="559" class="line none">  559  *</div><div id="560" class="line none">  560  * **Example**</div><div id="561" class="line none">  561  * @code{c}</div><div id="562" class="line none">  562  * HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="563" class="line none">  563  * // Declare an HTTPRequestHeaders_t and HTTPRequestInfo_t.</div><div id="564" class="line none">  564  * HTTPRequestHeaders_t requestHeaders = { 0 };</div><div id="565" class="line none">  565  * HTTPRequestInfo_t requestInfo = { 0 };</div><div id="566" class="line none">  566  * // A buffer that will fit the Request-Line, the User-Agent header line, and</div><div id="567" class="line none">  567  * // the Host header line.</div><div id="568" class="line none">  568  * uint8_t requestHeaderBuffer[ 256 ] = { 0 };</div><div id="569" class="line none">  569  *</div><div id="570" class="line none">  570  * // Set a buffer to serialize request headers to.</div><div id="571" class="line none">  571  * requestHeaders.pBuffer = requestHeaderBuffer;</div><div id="572" class="line none">  572  * requestHeaders.bufferLen = 256;</div><div id="573" class="line none">  573  *</div><div id="574" class="line none">  574  * // Set the Method, Path, and Host in the HTTPRequestInfo_t.</div><div id="575" class="line none">  575  * requestInfo.pMethod = HTTP_METHOD_GET;</div><div id="576" class="line none">  576  * requestInfo.methodLen = sizeof( HTTP_METHOD_GET ) - 1U;</div><div id="577" class="line none">  577  * requestInfo.pPath = "/html/rfc2616"</div><div id="578" class="line none">  578  * requestInfo.pathLen = sizeof( "/html/rfc2616" ) - 1U;</div><div id="579" class="line none">  579  * requestInfo.pHost = "tools.ietf.org"</div><div id="580" class="line none">  580  * requestInfo.hostLen = sizeof( "tools.ietf.org" ) - 1U;</div><div id="581" class="line none">  581  * requestInfo.reqFlags |= HTTP_REQUEST_KEEP_ALIVE_FLAG;</div><div id="582" class="line none">  582  *</div><div id="583" class="line none">  583  * httpLibraryStatus = HTTPClient_InitializeRequestHeaders( &amp;requestHeaders,</div><div id="584" class="line none">  584  *                                                          &amp;requestInfo );</div><div id="585" class="line none">  585  * @endcode</div><div id="586" class="line none">  586  */</div><div id="587" class="line none">  587 /* @[declare_httpclient_initializerequestheaders] */</div><div id="588" class="line none">  588 <a href="core_http_client.h.html#315">HTTPStatus_t</a> <a href="../core_http_client.c.html#1557">HTTPClient_InitializeRequestHeaders</a>( <a href="core_http_client.h.html#353">HTTPRequestHeaders_t</a> * pRequestHeaders,</div><div id="589" class="line none">  589                                                   const <a href="core_http_client.h.html#387">HTTPRequestInfo_t</a> * pRequestInfo );</div><div id="590" class="line none">  590 /* @[declare_httpclient_initializerequestheaders] */</div><div id="591" class="line none">  591 </div><div id="592" class="line none">  592 /**</div><div id="593" class="line none">  593  * @brief Add a header to the request headers stored in</div><div id="594" class="line none">  594  * #HTTPRequestHeaders_t.pBuffer.</div><div id="595" class="line none">  595  *</div><div id="596" class="line none">  596  * Upon return, pRequestHeaders-&gt;headersLen will be updated with the number of</div><div id="597" class="line none">  597  * bytes written.</div><div id="598" class="line none">  598  *</div><div id="599" class="line none">  599  * Headers are written in the following format:</div><div id="600" class="line none">  600  *</div><div id="601" class="line none">  601  * @code</div><div id="602" class="line none">  602  *     &lt;field&gt;: &lt;value&gt;\r\n\r\n</div><div id="603" class="line none">  603  * @endcode</div><div id="604" class="line none">  604  *</div><div id="605" class="line none">  605  * The trailing `\r\n` that denotes the end of the header lines is overwritten,</div><div id="606" class="line none">  606  * if it already exists in the buffer.</div><div id="607" class="line none">  607  *</div><div id="608" class="line none">  608  * @note This function validates only that `\r`, `\n`, and `:` are not present</div><div id="609" class="line none">  609  * in @p pValue or @p pField. `:` is allowed in @p pValue.</div><div id="610" class="line none">  610  *</div><div id="611" class="line none">  611  * @param[in] pRequestHeaders Request header buffer information.</div><div id="612" class="line none">  612  * @param[in] pField The header field name to write.</div><div id="613" class="line none">  613  * The data should be ISO 8859-1 (Latin-1) encoded per the HTTP standard,</div><div id="614" class="line none">  614  * but the API does not perform the character set validation.</div><div id="615" class="line none">  615  * @param[in] fieldLen The byte length of the header field name.</div><div id="616" class="line none">  616  * @param[in] pValue The header value to write.</div><div id="617" class="line none">  617  * The data should be ISO 8859-1 (Latin-1) encoded per the HTTP standard,</div><div id="618" class="line none">  618  * but the API does not perform the character set validation.</div><div id="619" class="line none">  619  * @param[in] valueLen The byte length of the header field value.</div><div id="620" class="line none">  620  *</div><div id="621" class="line none">  621  * @return One of the following:</div><div id="622" class="line none">  622  * - #HTTPSuccess (If successful.)</div><div id="623" class="line none">  623  * - #HTTPInvalidParameter (If any provided parameters or their members are invalid.)</div><div id="624" class="line none">  624  * - #HTTPInsufficientMemory (If application-provided buffer is not large enough to hold headers.)</div><div id="625" class="line none">  625  * - #HTTPSecurityAlertInvalidCharacter (If an invalid character was found in @p pField or @p pValue.)</div><div id="626" class="line none">  626  *</div><div id="627" class="line none">  627  * **Example**</div><div id="628" class="line none">  628  * @code{c}</div><div id="629" class="line none">  629  * HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="630" class="line none">  630  * // Assume that requestHeaders has already been initialized with</div><div id="631" class="line none">  631  * // HTTPClient_InitializeRequestHeaders().</div><div id="632" class="line none">  632  * HTTPRequestHeaders_t requestHeaders;</div><div id="633" class="line none">  633  *</div><div id="634" class="line none">  634  * httpLibraryStatus = HTTPClient_AddHeader( &amp;requestHeaders,</div><div id="635" class="line none">  635  *                                           "Request-Header-Field",</div><div id="636" class="line none">  636  *                                           sizeof( "Request-Header-Field" ) - 1U,</div><div id="637" class="line none">  637  *                                           "Request-Header-Value",</div><div id="638" class="line none">  638  *                                           sizeof("Request-Header-Value") - 1U );</div><div id="639" class="line none">  639  * @endcode</div><div id="640" class="line none">  640  */</div><div id="641" class="line none">  641 /* @[declare_httpclient_addheader] */</div><div id="642" class="line none">  642 <a href="core_http_client.h.html#315">HTTPStatus_t</a> <a href="../core_http_client.c.html#1654">HTTPClient_AddHeader</a>( <a href="core_http_client.h.html#353">HTTPRequestHeaders_t</a> * pRequestHeaders,</div><div id="643" class="line none">  643                                    const char * <a href="core_http_client_private.h.html#198">pField</a>,</div><div id="644" class="line none">  644                                    size_t <a href="core_http_client_private.h.html#199">fieldLen</a>,</div><div id="645" class="line none">  645                                    const char * pValue,</div><div id="646" class="line none">  646                                    size_t valueLen );</div><div id="647" class="line none">  647 /* @[declare_httpclient_addheader] */</div><div id="648" class="line none">  648 </div><div id="649" class="line none">  649 /**</div><div id="650" class="line none">  650  * @brief Add the byte range request header to the request headers store in</div><div id="651" class="line none">  651  * #HTTPRequestHeaders_t.pBuffer.</div><div id="652" class="line none">  652  *</div><div id="653" class="line none">  653  * For example, if requesting for the first 1kB of a file the following would be</div><div id="654" class="line none">  654  * written: `Range: bytes=0-1023\r\n\r\n`.</div><div id="655" class="line none">  655  *</div><div id="656" class="line none">  656  * The trailing `\r\n` that denotes the end of the header lines is overwritten,</div><div id="657" class="line none">  657  * if it already exists in the buffer.</div><div id="658" class="line none">  658  *</div><div id="659" class="line none">  659  * There are 3 different forms of range specification, determined by the</div><div id="660" class="line none">  660  * combination of @a rangeStartOrLastNBytes and @a rangeEnd parameter values:</div><div id="661" class="line none">  661  *</div><div id="662" class="line none">  662  * 1. Request containing both parameters for the byte range [rangeStart, rangeEnd]</div><div id="663" class="line none">  663  *    where @a rangeStartOrLastNBytes &lt;= @a rangeEnd.</div><div id="664" class="line none">  664  *    Example request header line: `Range: bytes=0-1023\r\n` for requesting bytes in the range [0, 1023].&lt;br&gt;</div><div id="665" class="line none">  665  *    **Example**</div><div id="666" class="line none">  666  *    @code{c}</div><div id="667" class="line none">  667  *    HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="668" class="line none">  668  *    // Assume that requestHeaders has already been initialized with</div><div id="669" class="line none">  669  *    // HTTPClient_InitializeRequestHeaders().</div><div id="670" class="line none">  670  *    HTTPRequestHeaders_t requestHeaders;</div><div id="671" class="line none">  671  *</div><div id="672" class="line none">  672  *    // Request for bytes 0 to 1023.</div><div id="673" class="line none">  673  *    httpLibraryStatus = HTTPClient_AddRangeHeader( &amp;requestHeaders, 0, 1023 );</div><div id="674" class="line none">  674  *    @endcode</div><div id="675" class="line none">  675  *</div><div id="676" class="line none">  676  * 2. Request for the last N bytes, represented by @p rangeStartOrlastNbytes.</div><div id="677" class="line none">  677  *    @p rangeStartOrlastNbytes should be negative and @p rangeEnd should be</div><div id="678" class="line none">  678  *    #HTTP_RANGE_REQUEST_END_OF_FILE.</div><div id="679" class="line none">  679  *    Example request header line: `Range: bytes=-512\r\n` for requesting the last 512 bytes</div><div id="680" class="line none">  680  *    (or bytes in the range [512, 1023] for a 1KB sized file).&lt;br&gt;</div><div id="681" class="line none">  681  *    **Example**</div><div id="682" class="line none">  682  *    @code{c}</div><div id="683" class="line none">  683  *    HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="684" class="line none">  684  *    // Assume that requestHeaders has already been initialized with</div><div id="685" class="line none">  685  *    // HTTPClient_InitializeRequestHeaders().</div><div id="686" class="line none">  686  *    HTTPRequestHeaders_t requestHeaders;</div><div id="687" class="line none">  687  *</div><div id="688" class="line none">  688  *    // Request for the last 512 bytes.</div><div id="689" class="line none">  689  *    httpLibraryStatus = HTTPClient_AddRangeHeader( &amp;requestHeaders, -512, HTTP_RANGE_REQUEST_END_OF_FILE)</div><div id="690" class="line none">  690  *    @endcode</div><div id="691" class="line none">  691  *</div><div id="692" class="line none">  692  * 3. Request for all bytes (till the end of byte sequence) from byte N,</div><div id="693" class="line none">  693  *    represented by @p rangeStartOrlastNbytes.</div><div id="694" class="line none">  694  *    @p rangeStartOrlastNbytes should be &gt;= 0 and @p rangeEnd should be</div><div id="695" class="line none">  695  *    #HTTP_RANGE_REQUEST_END_OF_FILE.&lt;br&gt;</div><div id="696" class="line none">  696  *    Example request header line: `Range: bytes=256-\r\n` for requesting all bytes after and</div><div id="697" class="line none">  697  *    including byte 256 (or bytes in the range [256,1023] for a 1kB sized file).&lt;br&gt;</div><div id="698" class="line none">  698  *    **Example**</div><div id="699" class="line none">  699  *    @code{c}</div><div id="700" class="line none">  700  *    HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="701" class="line none">  701  *    // Assume that requestHeaders has already been initialized with</div><div id="702" class="line none">  702  *    // HTTPClient_InitializeRequestHeaders().</div><div id="703" class="line none">  703  *    HTTPRequestHeaders_t requestHeaders;</div><div id="704" class="line none">  704  *</div><div id="705" class="line none">  705  *    // Request for all bytes from byte 256 onward.</div><div id="706" class="line none">  706  *    httpLibraryStatus = HTTPClient_AddRangeHeader( &amp;requestHeaders, 256, HTTP_RANGE_REQUEST_END_OF_FILE)</div><div id="707" class="line none">  707  *    @endcode</div><div id="708" class="line none">  708  *</div><div id="709" class="line none">  709  * @param[in] pRequestHeaders Request header buffer information.</div><div id="710" class="line none">  710  * @param[in] rangeStartOrlastNbytes Represents either the starting byte</div><div id="711" class="line none">  711  * for a range OR the last N number of bytes in the requested file.</div><div id="712" class="line none">  712  * @param[in] rangeEnd The ending range for the requested file. For end of file</div><div id="713" class="line none">  713  * byte in Range Specifications 2. and 3., #HTTP_RANGE_REQUEST_END_OF_FILE</div><div id="714" class="line none">  714  * should be passed.</div><div id="715" class="line none">  715  *</div><div id="716" class="line none">  716  * @return Returns the following status codes:</div><div id="717" class="line none">  717  * #HTTPSuccess, if successful.</div><div id="718" class="line none">  718  * #HTTPInvalidParameter, if input parameters are invalid, including when</div><div id="719" class="line none">  719  * the @p rangeStartOrlastNbytes and @p rangeEnd parameter combination is invalid.</div><div id="720" class="line none">  720  * #HTTPInsufficientMemory, if the passed #HTTPRequestHeaders_t.pBuffer</div><div id="721" class="line none">  721  * contains insufficient remaining memory for storing the range request.</div><div id="722" class="line none">  722  */</div><div id="723" class="line none">  723 /* @[declare_httpclient_addrangeheader] */</div><div id="724" class="line none">  724 <a href="core_http_client.h.html#315">HTTPStatus_t</a> <a href="../core_http_client.c.html#1714">HTTPClient_AddRangeHeader</a>( <a href="core_http_client.h.html#353">HTTPRequestHeaders_t</a> * pRequestHeaders,</div><div id="725" class="line none">  725                                         <a href="../dependency/3rdparty/http_parser/http_parser.h.html#40">int32_t</a> rangeStartOrlastNbytes,</div><div id="726" class="line none">  726                                         <a href="../dependency/3rdparty/http_parser/http_parser.h.html#40">int32_t</a> rangeEnd );</div><div id="727" class="line none">  727 /* @[declare_httpclient_addrangeheader] */</div><div id="728" class="line none">  728 </div><div id="729" class="line none">  729 /**</div><div id="730" class="line none">  730  * @brief Send the request headers in #HTTPRequestHeaders_t.pBuffer and request</div><div id="731" class="line none">  731  * body in @p pRequestBodyBuf over the transport. The response is received in</div><div id="732" class="line none">  732  * #HTTPResponse_t.pBuffer.</div><div id="733" class="line none">  733  *</div><div id="734" class="line none">  734  * If #HTTP_SEND_DISABLE_CONTENT_LENGTH_FLAG is not set in parameter @p sendFlags,</div><div id="735" class="line none">  735  * then the Content-Length to be sent to the server is automatically written to</div><div id="736" class="line none">  736  * @p pRequestHeaders. The Content-Length will not be written when there is</div><div id="737" class="line none">  737  * no request body. If there is not enough room in the buffer to write the</div><div id="738" class="line none">  738  * Content-Length then #HTTPInsufficientMemory is returned. Please see</div><div id="739" class="line none">  739  * #HTTP_MAX_CONTENT_LENGTH_HEADER_LENGTH for the maximum Content-Length header</div><div id="740" class="line none">  740  * field and value that could be written to the buffer.</div><div id="741" class="line none">  741  *</div><div id="742" class="line none">  742  * The application should close the connection with the server if any of the</div><div id="743" class="line none">  743  * following errors are returned:</div><div id="744" class="line none">  744  * - #HTTPSecurityAlertResponseHeadersSizeLimitExceeded</div><div id="745" class="line none">  745  * - #HTTPSecurityAlertExtraneousResponseData</div><div id="746" class="line none">  746  * - #HTTPSecurityAlertInvalidChunkHeader</div><div id="747" class="line none">  747  * - #HTTPSecurityAlertInvalidProtocolVersion</div><div id="748" class="line none">  748  * - #HTTPSecurityAlertInvalidStatusCode</div><div id="749" class="line none">  749  * - #HTTPSecurityAlertInvalidCharacter</div><div id="750" class="line none">  750  * - #HTTPSecurityAlertInvalidContentLength</div><div id="751" class="line none">  751  *</div><div id="752" class="line none">  752  * The @p pResponse returned is valid only if this function returns HTTPSuccess.</div><div id="753" class="line none">  753  *</div><div id="754" class="line none">  754  * @param[in] pTransport Transport interface, see #TransportInterface_t for</div><div id="755" class="line none">  755  * more information.</div><div id="756" class="line none">  756  * @param[in] pRequestHeaders Request configuration containing the buffer of</div><div id="757" class="line none">  757  * headers to send.</div><div id="758" class="line none">  758  * @param[in] pRequestBodyBuf Optional Request entity body. Set to NULL if there</div><div id="759" class="line none">  759  * is no request body.</div><div id="760" class="line none">  760  * @param[in] reqBodyBufLen The length of the request entity in bytes.</div><div id="761" class="line none">  761  * @param[in] pResponse The response message and some notable response</div><div id="762" class="line none">  762  * parameters will be returned here on success.</div><div id="763" class="line none">  763  * @param[in] sendFlags Flags which modify the behavior of this function. Please</div><div id="764" class="line none">  764  * see @ref http_send_flags for more information.</div><div id="765" class="line none">  765  *</div><div id="766" class="line none">  766  * @return One of the following:</div><div id="767" class="line none">  767  * - #HTTPSuccess (If successful.)</div><div id="768" class="line none">  768  * - #HTTPInvalidParameter (If any provided parameters or their members are invalid.)</div><div id="769" class="line none">  769  * - #HTTPNetworkError (Errors in sending or receiving over the transport interface.)</div><div id="770" class="line none">  770  * - #HTTPPartialResponse (Part of an HTTP response was received in a partially filled response buffer.)</div><div id="771" class="line none">  771  * - #HTTPNoResponse (No data was received from the transport interface.)</div><div id="772" class="line none">  772  * - #HTTPInsufficientMemory (The response received could not fit into the response buffer</div><div id="773" class="line none">  773  * or extra headers could not be sent in the request.)</div><div id="774" class="line none">  774  * - #HTTPParserInternalError (Internal parsing error.)\n\n</div><div id="775" class="line none">  775  * Security alerts are listed below, please see #HTTPStatus_t for more information:</div><div id="776" class="line none">  776  * - #HTTPSecurityAlertResponseHeadersSizeLimitExceeded</div><div id="777" class="line none">  777  * - #HTTPSecurityAlertExtraneousResponseData</div><div id="778" class="line none">  778  * - #HTTPSecurityAlertInvalidChunkHeader</div><div id="779" class="line none">  779  * - #HTTPSecurityAlertInvalidProtocolVersion</div><div id="780" class="line none">  780  * - #HTTPSecurityAlertInvalidStatusCode</div><div id="781" class="line none">  781  * - #HTTPSecurityAlertInvalidCharacter</div><div id="782" class="line none">  782  * - #HTTPSecurityAlertInvalidContentLength</div><div id="783" class="line none">  783  *</div><div id="784" class="line none">  784  * **Example**</div><div id="785" class="line none">  785  * @code{c}</div><div id="786" class="line none">  786  * // Variables used in this example.</div><div id="787" class="line none">  787  * HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="788" class="line none">  788  * TransportInterface_t transportInterface = { 0 };</div><div id="789" class="line none">  789  * HTTPResponse_t = { 0 };</div><div id="790" class="line none">  790  * char requestBody[] = "This is an example request body.";</div><div id="791" class="line none">  791  *</div><div id="792" class="line none">  792  * // Assume that requestHeaders has been initialized with</div><div id="793" class="line none">  793  * // HTTPClient_InitializeResponseHeaders() and any additional headers have</div><div id="794" class="line none">  794  * // been added with HTTPClient_AddHeader().</div><div id="795" class="line none">  795  * HTTPRequestHeaders_t requestHeaders;</div><div id="796" class="line none">  796  *</div><div id="797" class="line none">  797  * // Set the transport interface with platform specific functions that are</div><div id="798" class="line none">  798  * // assumed to be implemented elsewhere.</div><div id="799" class="line none">  799  * transportInterface.recv = myPlatformTransportReceive;</div><div id="800" class="line none">  800  * transportInterface.send = myPlatformTransportSend;</div><div id="801" class="line none">  801  * transportInterface.pNetworkContext = myPlatformNetworkContext;</div><div id="802" class="line none">  802  *</div><div id="803" class="line none">  803  * // Set the buffer to receive the HTTP response message into. The buffer is</div><div id="804" class="line none">  804  * // dynamically allocated for demonstration purposes only.</div><div id="805" class="line none">  805  * response.pBuffer = ( uint8_t* )malloc( 1024 );</div><div id="806" class="line none">  806  * response.bufferLen = 1024;</div><div id="807" class="line none">  807  *</div><div id="808" class="line none">  808  * httpLibraryStatus = HTTPClient_Send( &amp;transportInterface,</div><div id="809" class="line none">  809  *                                      &amp;requestHeaders,</div><div id="810" class="line none">  810  *                                      requestBody,</div><div id="811" class="line none">  811  *                                      sizeof( requestBody ) - 1U,</div><div id="812" class="line none">  812  *                                      &amp;response,</div><div id="813" class="line none">  813  *                                      0 );</div><div id="814" class="line none">  814  *</div><div id="815" class="line none">  815  * if( httpLibraryStatus == HTTPSuccess )</div><div id="816" class="line none">  816  * {</div><div id="817" class="line none">  817  *     if( response.status == 200 )</div><div id="818" class="line none">  818  *     {</div><div id="819" class="line none">  819  *         // Handle a response Status-Code of 200 OK.</div><div id="820" class="line none">  820  *     }</div><div id="821" class="line none">  821  * }</div><div id="822" class="line none">  822  * @endcode</div><div id="823" class="line none">  823  */</div><div id="824" class="line none">  824 /* @[declare_httpclient_send] */</div><div id="825" class="line none">  825 <a href="core_http_client.h.html#315">HTTPStatus_t</a> <a href="../core_http_client.c.html#2154">HTTPClient_Send</a>( const <a href="../interface/transport_interface.h.html#256">TransportInterface_t</a> * pTransport,</div><div id="826" class="line none">  826                               <a href="core_http_client.h.html#353">HTTPRequestHeaders_t</a> * pRequestHeaders,</div><div id="827" class="line none">  827                               const <a href="../dependency/3rdparty/http_parser/http_parser.h.html#37">uint8_t</a> * pRequestBodyBuf,</div><div id="828" class="line none">  828                               size_t reqBodyBufLen,</div><div id="829" class="line none">  829                               <a href="core_http_client.h.html#534">HTTPResponse_t</a> * <a href="core_http_client_private.h.html#266">pResponse</a>,</div><div id="830" class="line none">  830                               <a href="../dependency/3rdparty/http_parser/http_parser.h.html#41">uint32_t</a> sendFlags );</div><div id="831" class="line none">  831 /* @[declare_httpclient_send] */</div><div id="832" class="line none">  832 </div><div id="833" class="line none">  833 /**</div><div id="834" class="line none">  834  * @brief Read a header from a buffer containing a complete HTTP response.</div><div id="835" class="line none">  835  * This will return the location of the response header value in the</div><div id="836" class="line none">  836  * #HTTPResponse_t.pBuffer buffer.</div><div id="837" class="line none">  837  *</div><div id="838" class="line none">  838  * The location, within #HTTPResponse_t.pBuffer, of the value found, will be</div><div id="839" class="line none">  839  * returned in @p pValue. If the header value is empty for the found @p pField,</div><div id="840" class="line none">  840  * then this function will return #HTTPSuccess, and set the values for</div><div id="841" class="line none">  841  * @p pValueLoc and @p pValueLen as NULL and zero respectively. According to</div><div id="842" class="line none">  842  * RFC 2616, it is not invalid to have an empty value for some header fields.</div><div id="843" class="line none">  843  *</div><div id="844" class="line none">  844  * @note This function should only be called on a complete HTTP response. If the</div><div id="845" class="line none">  845  * request is sent through the #HTTPClient_Send function, the #HTTPResponse_t is</div><div id="846" class="line none">  846  * incomplete until #HTTPClient_Send returns.</div><div id="847" class="line none">  847  *</div><div id="848" class="line none">  848  * @param[in] pResponse The buffer containing the completed HTTP response.</div><div id="849" class="line none">  849  * @param[in] pField The header field name to read.</div><div id="850" class="line none">  850  * @param[in] fieldLen The length of the header field name in bytes.</div><div id="851" class="line none">  851  * @param[out] pValueLoc This will be populated with the location of the</div><div id="852" class="line none">  852  * header value in the response buffer, #HTTPResponse_t.pBuffer.</div><div id="853" class="line none">  853  * @param[out] pValueLen This will be populated with the length of the</div><div id="854" class="line none">  854  * header value in bytes.</div><div id="855" class="line none">  855  *</div><div id="856" class="line none">  856  * @return One of the following:</div><div id="857" class="line none">  857  * - #HTTPSuccess (If successful.)</div><div id="858" class="line none">  858  * - #HTTPInvalidParameter (If any provided parameters or their members are invalid.)</div><div id="859" class="line none">  859  * - #HTTPHeaderNotFound (Header is not found in the passed response buffer.)</div><div id="860" class="line none">  860  * - #HTTPInvalidResponse (Provided response is not a valid HTTP response for parsing.)</div><div id="861" class="line none">  861  * - #HTTPParserInternalError(If an error in the response parser.)</div><div id="862" class="line none">  862  *</div><div id="863" class="line none">  863  * **Example**</div><div id="864" class="line none">  864  * @code{c}</div><div id="865" class="line none">  865  * HTTPStatus_t httpLibraryStatus = HTTPSuccess;</div><div id="866" class="line none">  866  * // Assume that response is returned from a successful invocation of</div><div id="867" class="line none">  867  * // HTTPClient_Send().</div><div id="868" class="line none">  868  * HTTPResponse_t response;</div><div id="869" class="line none">  869  *</div><div id="870" class="line none">  870  * char * pDateLoc = NULL;</div><div id="871" class="line none">  871  * size_t dateLen = 0;</div><div id="872" class="line none">  872  * // Search for a "Date" header field. pDateLoc will be the location of the</div><div id="873" class="line none">  873  * // Date header value in response.pBuffer.</div><div id="874" class="line none">  874  * httpLibraryStatus = HTTPClient_ReadHeader( &amp;response,</div><div id="875" class="line none">  875  *                                            "Date",</div><div id="876" class="line none">  876  *                                            sizeof("Date") - 1,</div><div id="877" class="line none">  877  *                                            &amp;pDateLoc,</div><div id="878" class="line none">  878  *                                            &amp;dateLen );</div><div id="879" class="line none">  879  * @endcode</div><div id="880" class="line none">  880  */</div><div id="881" class="line none">  881 /* @[declare_httpclient_readheader] */</div><div id="882" class="line none">  882 <a href="core_http_client.h.html#315">HTTPStatus_t</a> <a href="../core_http_client.c.html#2496">HTTPClient_ReadHeader</a>( const <a href="core_http_client.h.html#534">HTTPResponse_t</a> * <a href="core_http_client_private.h.html#266">pResponse</a>,</div><div id="883" class="line none">  883                                     const char * <a href="core_http_client_private.h.html#198">pField</a>,</div><div id="884" class="line none">  884                                     size_t <a href="core_http_client_private.h.html#199">fieldLen</a>,</div><div id="885" class="line none">  885                                     const char ** <a href="core_http_client_private.h.html#200">pValueLoc</a>,</div><div id="886" class="line none">  886                                     size_t * <a href="core_http_client_private.h.html#201">pValueLen</a> );</div><div id="887" class="line none">  887 /* @[declare_httpclient_readheader] */</div><div id="888" class="line none">  888 </div><div id="889" class="line none">  889 /**</div><div id="890" class="line none">  890  * @brief Error code to string conversion utility for HTTP Client library.</div><div id="891" class="line none">  891  *</div><div id="892" class="line none">  892  * @note This returns constant strings, which should not be modified.</div><div id="893" class="line none">  893  *</div><div id="894" class="line none">  894  * @param[in] status The status code to convert to a string.</div><div id="895" class="line none">  895  *</div><div id="896" class="line none">  896  * @return The string representation of the status code.</div><div id="897" class="line none">  897  */</div><div id="898" class="line none">  898 /* @[declare_httpclient_strerror] */</div><div id="899" class="line none">  899 const char * <a href="../core_http_client.c.html#2561">HTTPClient_strerror</a>( <a href="core_http_client.h.html#315">HTTPStatus_t</a> status );</div><div id="900" class="line none">  900 /* @[declare_httpclient_strerror] */</div><div id="901" class="line none">  901 </div><div id="902" class="line none">  902 /* *INDENT-OFF* */</div><div id="903" class="line none">  903 #ifdef __cplusplus</div><div id="904" class="line none">  904     }</div><div id="905" class="line none">  905 #endif</div><div id="906" class="line none">  906 /* *INDENT-ON* */</div><div id="907" class="line none">  907 </div><div id="908" class="line none">  908 #endif /* ifndef CORE_HTTP_CLIENT_H_ */</div>
</div>
</body>
</html>
